{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shahbaz/Coding/Portfolio/social-media-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shahbaz/Coding/Portfolio/social-media-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{setPosts}from'state';import PostWidget from'./PostWidget';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostsWidget=function PostsWidget(_ref){var userId=_ref.userId,_ref$isProfile=_ref.isProfile,isProfile=_ref$isProfile===void 0?false:_ref$isProfile;var dispatch=useDispatch();var posts=useSelector(function(state){return state.posts;});var token=useSelector(function(state){return state.token;});var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://localhost:3001/posts',{method:'GET',headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;dispatch(setPosts({posts:data}));case 7:case\"end\":return _context.stop();}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();var getUserPosts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:3001/posts/\".concat(userId,\"/posts\"),{method:'GET',headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;dispatch(setPosts({posts:data}));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function getUserPosts(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(isProfile){getUserPosts();}else{getPosts();}},[]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsx(_Fragment,{children:posts.map(function(_ref4){var _id=_ref4._id,userId=_ref4.userId,firstName=_ref4.firstName,lastName=_ref4.lastName,description=_ref4.description,location=_ref4.location,picturePath=_ref4.picturePath,userPicturePath=_ref4.userPicturePath,likes=_ref4.likes,comments=_ref4.comments;return/*#__PURE__*/_jsx(PostWidget,{postId:_id,postUserId:userId,name:\"\".concat(firstName,\" \").concat(lastName),description:description,location:location,picturePath:picturePath,userPicturePath:userPicturePath,likes:likes,comments:comments},_id);})});};export default PostsWidget;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","setPosts","PostWidget","jsx","_jsx","Fragment","_Fragment","PostsWidget","_ref","userId","_ref$isProfile","isProfile","dispatch","posts","state","token","getPosts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","method","headers","Authorization","concat","sent","json","stop","apply","arguments","getUserPosts","_ref3","_callee2","_callee2$","_context2","children","map","_ref4","_id","firstName","lastName","description","location","picturePath","userPicturePath","likes","comments","postId","postUserId","name"],"sources":["/Users/shahbaz/Coding/Portfolio/social-media-app/client/src/features/widgets/PostsWidget.jsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setPosts } from 'state';\nimport PostWidget from './PostWidget';\n\nconst PostsWidget = ({ userId, isProfile = false }) => {\n\tconst dispatch = useDispatch();\n\tconst posts = useSelector((state) => state.posts);\n\tconst token = useSelector((state) => state.token);\n\n\tconst getPosts = async () => {\n\t\tconst response = await fetch('http://localhost:3001/posts', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: { Authorization: `Bearer ${token}` },\n\t\t});\n\t\tconst data = await response.json();\n\t\tdispatch(setPosts({ posts: data }));\n\t};\n\n\tconst getUserPosts = async () => {\n\t\tconst response = await fetch(\n\t\t\t`http://localhost:3001/posts/${userId}/posts`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: { Authorization: `Bearer ${token}` },\n\t\t\t}\n\t\t);\n\t\tconst data = await response.json();\n\t\tdispatch(setPosts({ posts: data }));\n\t};\n\n\tuseEffect(() => {\n\t\tif (isProfile) {\n\t\t\tgetUserPosts();\n\t\t} else {\n\t\t\tgetPosts();\n\t\t}\n\t}, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n\treturn (\n\t\t<>\n\t\t\t{posts.map(\n\t\t\t\t({\n\t\t\t\t\t_id,\n\t\t\t\t\tuserId,\n\t\t\t\t\tfirstName,\n\t\t\t\t\tlastName,\n\t\t\t\t\tdescription,\n\t\t\t\t\tlocation,\n\t\t\t\t\tpicturePath,\n\t\t\t\t\tuserPicturePath,\n\t\t\t\t\tlikes,\n\t\t\t\t\tcomments,\n\t\t\t\t}) => (\n\t\t\t\t\t<PostWidget\n\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\tpostId={_id}\n\t\t\t\t\t\tpostUserId={userId}\n\t\t\t\t\t\tname={`${firstName} ${lastName}`}\n\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\tlocation={location}\n\t\t\t\t\t\tpicturePath={picturePath}\n\t\t\t\t\t\tuserPicturePath={userPicturePath}\n\t\t\t\t\t\tlikes={likes}\n\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default PostsWidget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}