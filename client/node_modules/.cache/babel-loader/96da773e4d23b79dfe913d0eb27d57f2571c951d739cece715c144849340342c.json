{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shahbaz/Coding/Portfolio/social-media-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shahbaz/Coding/Portfolio/social-media-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shahbaz/Coding/Portfolio/social-media-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{setPost}from'state';import Friend from'components/Friend';import{Box,Divider,IconButton,Typography,useTheme}from'@mui/material';import{ChatBubbleOutlineOutlined,FavoriteBorderOutlined,FavoriteOutlined,ShareOutlined}from'@mui/icons-material';import FlexBetween from'components/FlexBetween';import WidgetWrapper from'components/WidgetWrapper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostWidget=function PostWidget(_ref){var postId=_ref.postId,postUserId=_ref.postUserId,name=_ref.name,description=_ref.description,location=_ref.location,picturePath=_ref.picturePath,userPicturePath=_ref.userPicturePath,likes=_ref.likes,comments=_ref.comments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isComments=_useState2[0],setIsComments=_useState2[1];var dispatch=useDispatch();var token=useSelector(function(state){return state.token;});var loggedInUserId=useSelector(function(state){return state.user._id;});var isLiked=Boolean(likes[loggedInUserId]);var likeCount=Object.keys(likes).length;var _useTheme=useTheme(),palette=_useTheme.palette;var main=palette.neutral.main;var primary=palette.primary.main;var patchLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,updatedPost;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://socialsocial.onrender.com/posts/\".concat(postId,\"/like\"),{method:'PATCH',headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({userId:loggedInUserId})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:updatedPost=_context.sent;dispatch(setPost({post:updatedPost}));case 7:case\"end\":return _context.stop();}},_callee);}));return function patchLike(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(WidgetWrapper,{m:\"2rem 0\",children:[/*#__PURE__*/_jsx(Friend,{friendId:postUserId,name:name,subtitle:location,userPicturePath:userPicturePath}),/*#__PURE__*/_jsx(Typography,{color:main,sx:{mt:'1rem'},children:description}),picturePath&&/*#__PURE__*/_jsx(\"img\",{width:\"100%\",height:\"auto\",alt:\"post\",style:{borderRadius:'0.75rem',marginTop:'0.75rem'},src:\"https://socialsocial.onrender.com/assets/\".concat(picturePath)}),/*#__PURE__*/_jsxs(FlexBetween,{mt:\"0.25rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:patchLike,children:isLiked?/*#__PURE__*/_jsx(FavoriteOutlined,{sx:{color:primary}}):/*#__PURE__*/_jsx(FavoriteBorderOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:likeCount})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setIsComments(!isComments);},children:/*#__PURE__*/_jsx(ChatBubbleOutlineOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:comments.length})]})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(ShareOutlined,{})})]}),isComments&&/*#__PURE__*/_jsxs(Box,{mt:\"0.5rem\",children:[comments.map(function(comment,index){return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{sx:{color:main,m:'0.5rem 0',pl:'1rem'},children:comment})]},\"\".concat(name,\"-\").concat(index));}),/*#__PURE__*/_jsx(Divider,{})]})]});};export default PostWidget;","map":{"version":3,"names":["useState","useDispatch","useSelector","setPost","Friend","Box","Divider","IconButton","Typography","useTheme","ChatBubbleOutlineOutlined","FavoriteBorderOutlined","FavoriteOutlined","ShareOutlined","FlexBetween","WidgetWrapper","jsx","_jsx","jsxs","_jsxs","PostWidget","_ref","postId","postUserId","name","description","location","picturePath","userPicturePath","likes","comments","_useState","_useState2","_slicedToArray","isComments","setIsComments","dispatch","token","state","loggedInUserId","user","_id","isLiked","Boolean","likeCount","Object","keys","length","_useTheme","palette","main","neutral","primary","patchLike","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","updatedPost","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","Authorization","body","JSON","stringify","userId","sent","json","post","stop","apply","arguments","m","children","friendId","subtitle","color","sx","mt","width","height","alt","style","borderRadius","marginTop","src","gap","onClick","map","comment","index","pl"],"sources":["/Users/shahbaz/Coding/Portfolio/social-media-app/client/src/features/widgets/PostWidget.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setPost } from 'state';\nimport Friend from 'components/Friend';\nimport { Box, Divider, IconButton, Typography, useTheme } from '@mui/material';\nimport {\n\tChatBubbleOutlineOutlined,\n\tFavoriteBorderOutlined,\n\tFavoriteOutlined,\n\tShareOutlined,\n} from '@mui/icons-material';\nimport FlexBetween from 'components/FlexBetween';\nimport WidgetWrapper from 'components/WidgetWrapper';\n\nconst PostWidget = ({\n\tpostId,\n\tpostUserId,\n\tname,\n\tdescription,\n\tlocation,\n\tpicturePath,\n\tuserPicturePath,\n\tlikes,\n\tcomments,\n}) => {\n\tconst [isComments, setIsComments] = useState(false);\n\tconst dispatch = useDispatch();\n\tconst token = useSelector((state) => state.token);\n\tconst loggedInUserId = useSelector((state) => state.user._id);\n\tconst isLiked = Boolean(likes[loggedInUserId]);\n\tconst likeCount = Object.keys(likes).length;\n\n\tconst { palette } = useTheme();\n\tconst main = palette.neutral.main;\n\tconst primary = palette.primary.main;\n\n\tconst patchLike = async () => {\n\t\tconst response = await fetch(\n\t\t\t`https://socialsocial.onrender.com/posts/${postId}/like`,\n\t\t\t{\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ userId: loggedInUserId }),\n\t\t\t}\n\t\t);\n\t\tconst updatedPost = await response.json();\n\t\tdispatch(setPost({ post: updatedPost }));\n\t};\n\n\treturn (\n\t\t<WidgetWrapper m='2rem 0'>\n\t\t\t<Friend\n\t\t\t\tfriendId={postUserId}\n\t\t\t\tname={name}\n\t\t\t\tsubtitle={location}\n\t\t\t\tuserPicturePath={userPicturePath}\n\t\t\t/>\n\t\t\t<Typography color={main} sx={{ mt: '1rem' }}>\n\t\t\t\t{description}\n\t\t\t</Typography>\n\t\t\t{picturePath && (\n\t\t\t\t<img\n\t\t\t\t\twidth='100%'\n\t\t\t\t\theight='auto'\n\t\t\t\t\talt='post'\n\t\t\t\t\tstyle={{ borderRadius: '0.75rem', marginTop: '0.75rem' }}\n\t\t\t\t\tsrc={`https://socialsocial.onrender.com/assets/${picturePath}`}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<FlexBetween mt='0.25rem'>\n\t\t\t\t<FlexBetween gap='1rem'>\n\t\t\t\t\t<FlexBetween gap='0.3rem'>\n\t\t\t\t\t\t<IconButton onClick={patchLike}>\n\t\t\t\t\t\t\t{isLiked ? (\n\t\t\t\t\t\t\t\t<FavoriteOutlined sx={{ color: primary }} />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<FavoriteBorderOutlined />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography>{likeCount}</Typography>\n\t\t\t\t\t</FlexBetween>\n\n\t\t\t\t\t<FlexBetween gap='0.3rem'>\n\t\t\t\t\t\t<IconButton onClick={() => setIsComments(!isComments)}>\n\t\t\t\t\t\t\t<ChatBubbleOutlineOutlined />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography>{comments.length}</Typography>\n\t\t\t\t\t</FlexBetween>\n\t\t\t\t</FlexBetween>\n\n\t\t\t\t<IconButton>\n\t\t\t\t\t<ShareOutlined />\n\t\t\t\t</IconButton>\n\t\t\t</FlexBetween>\n\t\t\t{isComments && (\n\t\t\t\t<Box mt='0.5rem'>\n\t\t\t\t\t{comments.map((comment, index) => (\n\t\t\t\t\t\t<Box key={`${name}-${index}`}>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Typography sx={{ color: main, m: '0.5rem 0', pl: '1rem' }}>\n\t\t\t\t\t\t\t\t{comment}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t))}\n\t\t\t\t\t<Divider />\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</WidgetWrapper>\n\t);\n};\n\nexport default PostWidget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}